---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# BNPMediation

The goal of BNPMediation is to provide two functions `bnpmediation` and `bnpconmediation`. The function `bnpmediation` provides the posterior means and credible intervals of the effects of mediation, whereas `bnpconmediation` provides the posterior means and credible intervals of the conditional effects. Another function `plot_effects` is provide that obtains the posterior plots of the effects. Bayesian Nonparametric (BNP) models are used for the observed data to identify and estimate the causal effects. The published journal can be found at http://dx.doi.org/10.1111/biom.12575. 
 

## Installation

You can install BNPMediation from github with:


```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("mjdaniels/BNPMediationProject") 

```

## Example

```{r}

dataTreatment = c(11.163989,  13.357644,  12.264292,  16.848934,  20.902562,  13.037647,  10.523266, 13.869733,  16.399047,  13.249197,  11.284890,  11.450062,  10.817139,  15.245700, 9.920019,  11.573960,  10.911009,  10.489587,  10.814474,  10.479123,  11.576099, 9.527664,  19.139293,  10.419879,  11.477210, 9.974351,  11.661321,  11.107294, 10.703919,  10.229351,  14.304395,  11.966633,  12.320991,  17.905459,  9.661749, 10.385607,  20.406423,  10.777457,  9.825228,  13.691681, 9.871743,  10.500229, 10.285037,  14.930915,  13.608770,  16.167101,  13.602650,  14.786788,  10.867811, 10.512889,  11.412777,  11.982880,  8.774465,  10.481118,  9.444334,  15.367506,  9.772886,  10.974271,  9.893823,  20.102887,  11.444247,  10.500275,  9.847932,  11.732694,  11.462192,  13.380679,  12.794651,  9.678496,  17.062716,  14.091250,  9.289893,  10.719766,  10.636155,  9.798370,  10.298192,  10.618451,  10.365415,  18.189078,  15.972311,  11.072824,  12.343840,  11.811951,  10.639700,  15.114964,  11.880889,  11.335969,  11.388849,  10.878676,  10.722346,  11.307921,  9.956277,  9.213929,  10.085210,  11.800195,  10.658099,  10.718170,  11.422773,  10.623135,  11.142688,  10.719141,  12.885994,  9.060620,  13.221060,  9.687241,  12.399068,  12.719150,  10.968212,  12.011608,  11.513917,  9.541409,  11.621904,  13.197714,  11.697384,  14.032590,  12.267005,  15.554890,  11.958848 )
dataControl = c(9.060491, 7.566083, 8.081978, 6.450560, 7.252086, 7.545289, 9.019265 ,7.678507, 7.353213, 10.708195, 8.253596, 8.413139, 9.588276, 10.589635 ,8.619169, 9.088016, 7.063381, 6.403902, 8.413106, 7.254758, 7.946906,7.013008, 6.828835, 7.198124, 8.133756, 14.843925, 8.043300, 9.978774,11.630415, 6.912515, 7.354103, 6.634561, 9.672022, 9.785791, 7.490891,12.384268, 9.223109, 6.719683, 8.311750, 9.388895, 7.773400, 14.815319,20.050661, 6.417857, 10.674383, 9.293519, 14.880615, 8.090496, 7.880399, 7.181893, 7.913207, 7.086220, 10.728450, 8.687074, 6.958637, 14.135874, 7.273476, 10.325233, 7.736805, 14.173735, 7.773935, 9.227020, 8.257979 ,11.986135, 7.875595, 7.341740, 6.036009, 8.976403, 7.396193, 7.217195, 6.849920, 10.399304, 12.968451, 7.879505, 7.816833, 7.270345, 7.299595,10.799175, 6.471268, 6.234942, 8.203609, 6.411400, 10.768465, 8.162683, 7.262786, 8.473937, 9.886522, 7.018580, 6.836707, 7.283106, 7.344599, 8.686345, 9.547393, 10.468727, 14.321967, 7.183868, 10.743336, 6.865275, 7.725663, 7.168826, 9.654838, 14.515487, 9.493838, 12.502887, 9.970782, 7.366840, 8.856238, 7.529891, 15.989223, 7.827295, 7.505671, 7.966335, 8.062032, 6.708697, 10.414558, 10.033180, 7.512152, 10.476679, 9.338416, 6.898800, 7.380856, 10.896545, 9.672738 )

  
 nburn <- 500
 nsave <- 1000
 nskip <- 10
 ndisplay <- 100
 mcmc <- list(nburn=nburn,nsave=nsave,nskip=nskip,ndisplay=ndisplay)

 s2 <- matrix(c(1000,0,0,1),ncol=2)
 m2 <- c(20,3)
 psiinv2 <- solve(matrix(c(1000,0,0,1),ncol=2))
 prior <- list(a0=1,b0=1/5,nu1=4,nu2=4,s2=s2,m2=m2,psiinv2=psiinv2,tau1=0.01,tau2=0.01)

library(BNPMediation)
bnpmediation(dataTreatment, dataControl, prior, mcmc, state, status = TRUE, na.action, q = 2, NN = 10, n1 = 10, n0 = 10, extra.thin = 0, seed= 12345)



```






